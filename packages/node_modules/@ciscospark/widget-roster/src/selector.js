import {createSelector} from 'reselect';

const getWidget = (state) => state.widgetRoster;
const getSparkInstance = (state, props) => props.sparkInstance || state.spark.get(`spark`);
const getSparkState = (state) => state.spark.get(`status`);
const getConversation = (state) => state.conversation;
const getUsers = (state) => state.user;

export const getRosterWidgetProps = createSelector(
  [
    getSparkInstance,
    getSparkState,
    getConversation,
    getUsers,
    getWidget
  ],
  (sparkInstance, sparkState, ...props) => {
    const propsObject = {};
    const propNames = [
      `conversation`,
      `user`,
      `widgetRoster`
    ];
    props.map((p, i) => {
      propsObject[propNames[i]] = p;
      return p;
    });
    propsObject.sparkInstance = sparkInstance;
    propsObject.sparkState = sparkState.toJS();

    return propsObject;
  }
);
